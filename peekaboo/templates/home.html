{% extends "base.html" %}

{% block content %}

    <h2>What Your Browser Says</h2>
    <br>
    <center>
        <table width="500" border="1px">
            <thead>
                <tr align=left>
                    <th>Source</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Node Hostname</td>
                    <td>{{ hostname }}</td>
                </tr>

                <tr>
                    <td>Node OS Type</td>
                    <td>{{ ostype }}</td>
                </tr>

                <tr>
                    <td>Node OS Version</td>
                    <td>{{ osversion }}</td>
                </tr>

                <tr>
                    <td>Request Client IP</td>
                    <td>{{ requestip }}</td>
                </tr>
                <tr>
                    <td>Environment</td>
                    <td>{{ env }}</td>
                </tr>

            </tbody>
        </table>
        <br><br><br>
        <canvas id="demandchart" width="400" height="400"></canvas>

    </center>


    <script>

        var _var = {{ dailyhits|tojson }}
        _var = JSON.parse(_var)
        const ctx = document.getElementById('demandchart').getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                datasets: [{
                    label: 'Daily Sessions',
                    data: _var,
                    backgroundColor: '#0000FF',
                    borderWidth: 1
                }]
            },
            options: {
                parsing: {
                    xAxisKey: 'Date',
                    yAxisKey: 'Sessions'
                },
                responsive: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

    </script>

{% endblock %}
